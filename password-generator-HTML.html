<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Password generator per colonne verticali</title>
<style>
  body {
    background: #f8f9fa;
    padding: 2rem;
    font-family: Arial, sans-serif; /* font normale per tutto tranne bottoni */
  }
  h1 {
    margin-bottom: 1rem;
    font-weight: normal;
  }
  .container {
    max-width: 900px;
    margin: auto;
  }
  #buttons-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-auto-rows: auto;
    gap: 1rem;
  }
  .password-btn {
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    font-size: 1.3rem;
    padding: 0.6rem 1rem;
    border: none;
    cursor: pointer;
    white-space: nowrap;
    border-radius: 12px;
    transition: transform 0.1s ease;
    width: 100%;
    box-sizing: border-box;
  }
  .password-btn:active {
    transform: scale(0.97);
  }
  #copy-notice {
    position: fixed;
    top: 1rem;
    right: 1rem;
    background: #28a745;
    color: white;
    padding: 0.75rem 1.25rem;
    border-radius: 0.3rem;
    box-shadow: 0 0 10px rgba(40,167,69,0.7);
    display: none;
    z-index: 1050;
    font-weight: bold;
    font-family: Arial, sans-serif;
  }
</style>
</head>
<body>

<div class="container">
  <h1>Password casuali (12 caratteri, 1 simbolo speciale)</h1>
  <p>Clicca su una password per copiarla negli appunti.</p>
  <div id="buttons-container"></div>
  
  <!-- âœ… Disclaimer -->
  <div class="mt-5 text-muted small text-center">
    <hr>
    <p>ðŸ‡®ðŸ‡¹ Tutti i programmi forniti sono da intendersi esclusivamente come esercizi di programmazione a titolo esemplificativo e didattico, privi di qualsiasi valore legale, vincolante o normativo, e sono forniti "cosÃ¬ come sono", senza alcuna garanzia di funzionamento, accuratezza o aggiornamento.</p>
    <p>ðŸ‡ºðŸ‡¸ All programs provided are to be considered solely as programming exercises for illustrative and educational purposes, without any legal, binding, or normative value, and are provided "as is," without any warranty of functionality, accuracy, or currency.</p>
  </div>
</div>

<div id="copy-notice"></div>

<script>
(() => {
  // 160 parole divise in 4 blocchi da 40 parole ciascuno
  const parole = {
    animali: [
      "gatto","cane","leone","tigre","orso","lupo","volpe","cervo","cavallo","elefante",
      "scimmia","coniglio","panda","aquila","falco","serpente","tartaruga","coccodrillo","rana","topo",
      "riccio","delfino","squalo","balena","gazzella","canguro","gorilla","ippopotamo","lepre","struzzo",
      "pipistrello","cormorano","cervo","ornitorinco","quaglia","gufo","mozzicone","faina","cigno","donkey"
    ],
    colori: [
      "rosso","verde","blu","giallo","arancione","viola","rosa","ciano","magenta","indaco",
      "turchese","lilla","bordo","senape","ocra","ambra","salmone","terracotta","beige","avorio",
      "antracite","zafferano","celeste","corallo","malva","verdeacqua","fucsia","grigio","marrone","lime",
      "oliva","petrolio","smeraldo","te","torba","zinnober","zaffiro","zanahoria","zenzero","zucchero"
    ],
    fiori: [
      "rosa","tulipano","giglio","margherita","orchidea","loto","violetta","garofano","camelia","papavero",
      "gardenia","iris","jacinto","magnolia","narciso","peonia","ranuncolo","zinnia","geranio","azalea",
      "begonia","ciclamino","dalia","fiordaliso","ginestra","primula","rododendro","viola","anemone","calendula",
      "cala","camedrio","fiorellino","maranta","mimosa","nasturzio","oleandro","verbena","zagara","amelia"
    ],
    frutti: [
      "mela","pera","banana","arancia","ciliegia","fragola","limone","pesca","albicocca","prugna",
      "melograno","ananas","kiwi","cocco","uva","anguria","fico","mandarino","lampone","mirtillo",
      "papaya","cachi","cetriolo","more","ribes","cachi","litchi","rabarbaro","nashi","guava",
      "pomelo","cantalupo","kumquat","pomodoro","cassis","acerola","corbezzolo","physalis","dattero","mirtilo"
    ]
  };

  const speciali = ['!', '$', '%', '&', '+', '_'];

  const colori = [
    '#FFD700', // giallo
    '#FF00FF', // magenta
    '#00FFFF', // ciano
    '#FFA500', // arancione
    '#800080', // viola
    '#008000'  // verde
  ];

  function testoPerSfondo(hexColor) {
    const hex = hexColor.replace('#', '');
    const r = parseInt(hex.substring(0,2),16);
    const g = parseInt(hex.substring(2,4),16);
    const b = parseInt(hex.substring(4,6),16);
    const lum = 0.299*r + 0.587*g + 0.114*b;
    return (lum > 186) ? '#000000' : '#FFFFFF';
  }

  function generaPassword(word) {
    const wLen = word.length;
    const mancanti = 12 - wLen;
    if(mancanti < 1) return null;
    const simbolo = speciali[Math.floor(Math.random()*speciali.length)];

    let numeri = '';
    for(let i=0; i<mancanti-1; i++) {
      numeri += Math.floor(Math.random()*10);
    }

    const posSimbolo = Math.floor(Math.random()*(numeri.length+1));
    const riempimento = numeri.slice(0,posSimbolo) + simbolo + numeri.slice(posSimbolo);

    return word.charAt(0).toUpperCase() + word.slice(1) + riempimento;
  }

  function scegliColore(colori, assegnati, pos, colCount = 4) {
    const vicini = [];
    if (pos % colCount !== 0 && assegnati[pos-1]) vicini.push(assegnati[pos-1]);
    if (pos - colCount >= 0 && assegnati[pos-colCount]) vicini.push(assegnati[pos-colCount]);

    const possibili = colori.filter(c => !vicini.includes(c));
    if (possibili.length === 0) return colori[Math.floor(Math.random()*colori.length)];
    return possibili[Math.floor(Math.random()*possibili.length)];
  }

  const buttonsContainer = document.getElementById('buttons-container');
  const copyNotice = document.getElementById('copy-notice');

  const tipi = ['animali', 'colori', 'fiori', 'frutti'];
  const nPerCol = 10;
  const nCols = tipi.length;

  let passwords = [];

  tipi.forEach(tipo => {
    const paroleTipo = parole[tipo];
    for(let i=0; i<nPerCol; i++) {
      const word = paroleTipo[Math.floor(Math.random()*paroleTipo.length)];
      const pwd = generaPassword(word);
      if(pwd) passwords.push({pwd, tipo});
      else i--;
    }
  });

  const ordinati = [];
  for(let r=0; r<nPerCol; r++) {
    for(let c=0; c<nCols; c++) {
      ordinati.push(passwords[c*nPerCol + r].pwd);
    }
  }

  const coloriAssegnati = [];
  for(let i=0; i<ordinati.length; i++) {
    coloriAssegnati[i] = scegliColore(colori, coloriAssegnati, i, nCols);
  }

  ordinati.forEach((pwd,i) => {
    const btn = document.createElement('button');
    btn.className = 'password-btn';
    btn.textContent = pwd;
    btn.style.backgroundColor = coloriAssegnati[i];
    btn.style.color = testoPerSfondo(coloriAssegnati[i]);
    btn.addEventListener('click', () => {
      navigator.clipboard.writeText(pwd).then(() => {
        copyNotice.textContent = 'Password copiata: ' + pwd;
        copyNotice.style.display = 'block';
        clearTimeout(copyNotice.timeoutId);
        copyNotice.timeoutId = setTimeout(() => {
          copyNotice.style.display = 'none';
        }, 2000);
      }).catch(() => alert('Copia fallita'));
    });
    buttonsContainer.appendChild(btn);
  });
})();
</script>

</body>
</html>
